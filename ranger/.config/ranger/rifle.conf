# Images & PDFs → Preview.app
mime ^image,                                   X, flag f = open -a "Preview" -- "$@"
ext jpg|jpeg|png|gif|bmp|tif|tiff|webp|heic|heif, X, flag f = open -a "Preview" -- "$@"
ext pdf,                                       X, flag f = open -a "Preview" -- "$@"

# Office documents → default macOS app
ext doc|docx|docm|dot|dotx|dotm,               X, flag f = open -- "$@"
ext xls|xlsx|xlsm|xlt|xltx|xltm|xlsb|csv,      X, flag f = open -- "$@"
ext ppt|pptx|pptm|pot|potx|potm,               X, flag f = open -- "$@"
ext odt|ods|odp|odg|odf,                       X, flag f = open -- "$@"
ext pages|numbers|key,                         X, flag f = open -- "$@"
ext rtf|rtfd,                                  X, flag f = open -- "$@"

# Text/code → Neovim
ext txt|md|tex|lua|vim|json|yml|yaml|py|js|ts|tsx|html|css|toml|ini|sh|bash|zsh|conf, terminal = nvim -- "$@"
mime ^text,                                    terminal = nvim -- "$@"
label edit,                                    terminal = nvim -- "$@"

# Archives
ext 7z,      has 7z              = 7z -p l -- "$@" | ${PAGER:-less}
ext zip,     has unzip           = unzip -l -- "$1" | ${PAGER:-less}
ext tar|gz|bz2|xz, has tar       = tar vvtf "$1" | ${PAGER:-less}
ext zip,     X, flag f, label=open_in_finder = open -- "$@"

# Audio / Video
mime ^audio, X, flag f = open -- "$@"
mime ^video, X, flag f = open -- "$@"

# Fonts
mime ^font,  X, flag f = open -a "Font Book" -- "$@"

# Directories (manual)
directory, label=open_dir_in_finder, X, flag f = open -- "$@"

# Quick Look (manual)
label quicklook, X, flag f = qlmanage -p "$@" >/dev/null 2>&1

# CSV Quick Look
ext csv, X, flag f = qlmanage -p "$@" >/dev/null 2>&1

# Fallback
label macos_fallback, X, flag f = open -- "$@"

# Executables
mime application/x-executable, terminal = "$1"
